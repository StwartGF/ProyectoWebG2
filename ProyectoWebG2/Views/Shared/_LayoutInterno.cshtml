@{
    var title = ViewData["Title"] as string ?? "Dashboard";
    var nombre = Context.Session.GetString("NombreUsuario") ?? "";
    var rol = Context.Session.GetString("NombrePerfil") ?? "";

    // Permitir que la vista fuerce una clase concreta (opcional)
    var sidebarClass = ViewData["SidebarClass"] as string;

    // Si la vista no define SidebarClass, decidimos por rol:
    if (string.IsNullOrEmpty(sidebarClass))
    {
        if (rol == "Administrador")
        {
            // Sidebar verde para admin
            sidebarClass = "sidebar sidebar-admin";
        }
        else if (rol == "Estudiante")
        {
            // Sidebar azul para estudiante
            sidebarClass = "sidebar sidebar-estudiante";
        }
        else
        {
            // Rol genérico / por defecto
            sidebarClass = "sidebar";
        }
    }
}
<!doctype html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>@title - ProyectoWebG2</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <style>
        .sidebar {
            min-width: 220px;
            max-width: 220px;
            background: #212529; /* fondo base oscuro */
            color: #fff;
        }

        /* Sidebar verde para administrador */
        .sidebar-admin {
            background: #198754; /* verde tipo bootstrap success */
        }

        /* Sidebar azul para estudiante (opcional) */
        .sidebar-estudiante {
            background: #0d6efd; /* azul bootstrap primary */
        }

        .sidebar .nav-link {
            color: #fff;
        }

            .sidebar .nav-link.active,
            .sidebar .nav-link:focus {
                background: #495057;
                color: #fff;
            }

        .sidebar .sidebar-header {
            padding: 1rem;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="d-flex">
      
        <nav class="@sidebarClass d-flex flex-column vh-100">
            <div class="sidebar-header">ProyectoWebG2</div>
            <ul class="nav flex-column mb-auto">
               
                <li class="nav-item">
                    <a class="nav-link @(ViewContext.RouteData.Values["action"]?.ToString() == "Index" ? "active" : null)"
                       asp-controller="Home" asp-action="Index">Inicio</a>
                </li>

              
                @if (rol == "Administrador")
                {
                    <li class="nav-item">
                        <a class="nav-link" asp-controller="Matricula" asp-action="Index">Matrículas</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-controller="Cursos" asp-action="Index">Cursos</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-controller="Calificaciones" asp-action="Index">Calificaciones</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-controller="Asistencias" asp-action="Index">Asistencias</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-controller="Instructores" asp-action="Create">INSTRUCTORES</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-controller="AsignarCursos" asp-action="Index">Asignar Cursos</a>
                    </li>
                }

             
                @if (rol == "Instructor")
                {
                    <li class="nav-item">
                        <a class="nav-link" asp-controller="Cursos" asp-action="Index">Cursos</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-controller="Calificaciones" asp-action="Index">Calificaciones</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-controller="Asistencias" asp-action="Index">Asistencia</a>
                    </li>
                }

             
                @if (rol == "Estudiante")
                {
                    <li class="nav-item">
                        <a class="nav-link" asp-controller="Matricula" asp-action="Index">Matricula</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-controller="Cursos" asp-action="Index">Cursos</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-controller="Estudiantes" asp-action="Calificaciones">Calificaciones</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-controller="Cursos" asp-action="Disponibles">Cursos Disponibles</a>
                    </li>
                }
            </ul>
        </nav>

       
        <div class="flex-grow-1">
            <header class="p-3 border-bottom bg-light">
                <div class="container-fluid d-flex align-items-center">
                    <span class="me-auto fw-bold">@title</span>

                    <span class="me-3">
                        @nombre (@rol)
                    </span>

                    <span class="me-3">🔔</span>

                    
                    <a asp-controller="Home"
                       asp-action="Logout"
                       class="btn btn-danger btn-sm text-white">
                        Cerrar sesión
                    </a>
                </div>
            </header>
            <main class="container-lg py-4">
                @RenderBody()
            </main>
            <footer class="footer px-4 py-2 bg-light border-top">
                <div>© @DateTime.Now.Year ProyectoWebG2</div>
            </footer>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
