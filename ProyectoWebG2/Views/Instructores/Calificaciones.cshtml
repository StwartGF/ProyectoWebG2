@model ProyectoWebG2.Models.CalificacionesFormVM
@{
    Layout = "_LayoutInterno";
    ViewData["Title"] = "Calificar estudiantes";
}

<div class="d-flex justify-content-between align-items-center mb-3">
    <div>
        <h2 class="mb-0">Calificaciones</h2>
        <p class="text-muted mb-0">Ingresa la calificación de cada estudiante.</p>
    </div>
    <a class="btn btn-outline-primary" asp-action="Estudiantes" asp-route-cursoId="@Model.CursoId">Volver a estudiantes</a>
</div>

@if (TempData["Msg"] != null)
{
    <div class="alert alert-success">@TempData["Msg"]</div>
}
@if (TempData["Error"] != null)
{
    <div class="alert alert-danger">@TempData["Error"]</div>
}

<form asp-action="Calificaciones" method="post">
    @Html.AntiForgeryToken()
    <input type="hidden" asp-for="CursoId" />

    <div class="card shadow-sm">
        <div class="card-body p-0">
            <table class="table table-hover mb-0 align-middle">
                <thead class="table-light">
                    <tr>
                        <th>Estudiante</th>
                        <th style="width:200px;">Calificación</th>
                    </tr>
                </thead>
                <tbody>
                    @if (Model.Items != null && Model.Items.Any())
                    {
                        for (int i = 0; i < Model.Items.Count; i++)
                        {
                            <tr>
                                <td>
                                    <input type="hidden" asp-for="Items[i].IdUsuario" />
                                    <input type="hidden" asp-for="Items[i].NombreCompleto" />
                                    @Model.Items[i].NombreCompleto
                                </td>
                                <td>
                                    <input asp-for="Items[i].Calificacion"
                                           type="number"
                                           class="form-control form-control-sm"
                                           min="0"
                                           max="100"
                                           step="0.01"
                                           placeholder="Ej: 95.5" />
                                </td>
                            </tr>
                        }
                    }
                    else
                    {
                        <tr>
                            <td colspan="2" class="text-center py-4 text-muted">
                                No hay estudiantes para calificar.
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>

    <div class="mt-3 d-flex justify-content-end">
        <button type="submit" class="btn btn-success">Guardar calificaciones</button>
    </div>
</form>
